{% load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'charts/style.css'%}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/style.css'%}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" 
    crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <title>CRMS</title>
</head>
<body>
    <div class="side-menu">
        <div class="brand-name">
            <h1>CRMS</h1>
        </div>
        <ul>
            <a href="{% url 'userdash'%}"><li><img src="{% static 'images/dash.png'%}" alt="">&nbsp;<span>Dashboard</span> </li></a>
            <a href="{% url 'dashboard'%}"><li><img src="{% static 'images/files.png'%}" alt="">&nbsp; <span>Files</span></li></a>
            <a href="{% url 'statistics'%}"><li><img src="{% static 'images/dashboard.png'%}" alt="">&nbsp; <span>Statistics</span></li></a>
        </ul>
    </div>
    <div class="container">
        <div class="header">
            <div class="nav">
                <div class="user">
                    <a href="{% url 'reportcase'%}" class="btn">Report Crime</a>
                    <a href="{% url 'logout' %}" class="nav-link"><img src="{% static 'images/logout.png'%}" alt=""></a>
                    <div class="img-case">
                        <img src="{% static 'images/user.png'%}" alt="">
                    </div>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="cards">
                <a href="{% url 'admin:login_evidence_changelist' %}" class="btn">
                <div class="card">
                    <div class="box">
                        <h1 class="counter">{{evidence_count}}</h1>
                        <h3>Evidence</h3>
                    </div>
                    <div class="icon-case">
                        <img src="{% static 'images/evidence.png'%}" alt="">
                    </div>
                </div>
            </a>
            <a href="{% url 'admin:login_crime_changelist' %}" class="btn">
                <div class="card">
                    <div class="box">
                        <h1 class="counter">{{crime_count}}</h1>
                        <h3>Crimes</h3>
                    </div>
                    <div class="icon-case">
                        <img src="{% static 'images/criminals.png'%}" alt="">
                    </div>
                </div>
            </a>
            <a href="{% url 'admin:login_investigation_changelist' %}" class="btn">    
                <div class="card">
                    <div class="box">
                        <h1 class="counter">{{investigation_count}}</h1>
                        <h3>Investigations</h3>
                    </div>
                    <div class="icon-case">
                        <img src="{% static 'images/investigation.png'%}" alt="">
                    </div>
                </div>

            </a>
            <a href="{% url 'admin:auth_user_changelist' %}" class="btn">
                <div class="card">
                    <div class="box">
                        <h1 class="counter">{{user_count}}</h1>
                        <h3>Users</h3>
                    </div>
                    <div class="icon-case">
                        <img src="{% static 'images/users.png'%}" alt="">
                    </div>
                </div>
            </a>
            </div>
            <div class="content-2">
                <div class="recent-payments">
                    <div class="title">
                        <h2>Summary</h2>
                        <a href="{% url 'admin:login_crime_changelist' %}" class="btn">View All</a>
                    </div>
                    <canvas id="myBarChart" width="100%" height="50px"></canvas>
                    
                                    
                 </div>
                <div class="new-students">
                    <div class="title">
                        <h2>Suspects</h2>
                        <a href="{% url 'admin:login_suspect_changelist'%}" class="btn">View All</a>
                    </div>
                    <canvas id="myPieChart" width="100%" height="100%"></canvas> 
                                   
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
    <script src="{% static "js/datatables-simple-demo.js" %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
    <script src="jquery.counterup.min.js"></script>
    <script src="{% static 'js/jquery.counterup.min.js' %}"></script>

    <script src="{% static 'js/scripts.js'%}"></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js></script>  
    <script src="{% static 'charts/chart.min.js'%}" crossorigin="anonymous"></script>
    <script src="{% static 'charts/chart-area.js'%}"></script>
    <!--<script src="{% static 'charts/chart-pie.js'%}"></script>-->
    <!--<script src="{% static 'charts/chart-bar.js'%}"></script>-->
    <script>
        const chargecount={{charge_count}}
        const evidencecount={{evidence_count}}
        const investigationcount={{investigation_count}}
        const suspectcount={{suspect_count}}
        const victimcount={{victim_count}}
        const witnesscount={{witness_count}}
        
        // Set new default font family and font color to mimic Bootstrap's default styling
Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#292b2c';

// Bar Chart Example
var ctx = document.getElementById("myBarChart");
var myLineChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ["chargecount", "evidencecount","investigationcount", "suspectcount","victimcount", "witnesscount"],
    datasets: [{
      label: "Total",
      backgroundColor: "rgba(2,117,216,1)",
      borderColor: "rgba(2,117,216,1)",
      data: [chargecount,evidencecount,investigationcount,suspectcount,victimcount,witnesscount],
    }],
  },
  options: {
    scales: {
      xAxes: [{
        time: {
          unit: 'Number'
        },
        gridLines: {
          display: false
        },
        ticks: {
          maxTicksLimit: 6
        }
      }],
      yAxes: [{
        ticks: {
          min: 0,
          max: 50,
          maxTicksLimit: 10
        },
        gridLines: {
          display: true
        }
      }],
    },
    legend: {
      display: false
    }
  }
});

    </script>
    <script>
        jQuery(document).ready(function($){
            $('.counter').counterUp({
                delay: 10,
                time: 1000
            });
        });
    </script>
    <script>
        const female_crime_count={{female_crime_count}}
        const male_crime_count={{male_crime_count}}
                // Set new default font family and font color to mimic Bootstrap's default styling
        Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
        Chart.defaults.global.defaultFontColor = '#292b2c';

        // Pie Chart Example
        var ctx = document.getElementById("myPieChart");
        var myPieChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ["Male", "Female"],
            datasets: [{
            data: [male_crime_count, female_crime_count],
            backgroundColor: ['#007bff', '#dc3545'],
            }],
        },
        });

    </script>
</body>
</html>